# 物理层 - 数据和信号

- 简介

  物理层的一个主要功能是通过传输介质以电磁信号的形式传输数据。无论是从另一台计算机中收集统计数据，还是从一台设计工作站发送动画图片，或者是使远程控制中心响铃，都需要通过网络连接传输数据(data)。

  一般情况下，对于个人或者应用程序有用的数据并非都是能够通过网络进行传输。例如，一张照片必须先转换为传输介质可以接受的形式。传输介质通过沿着物理路径传导能量的方式进行工作。

  ***数据要进行传输，必须将其转换为电磁信号。***

## 模拟与数字

- 简介

  数据以及表示数据的信号可以使用模拟(analog)或者数字(digital)的形式。

### 模拟数据与数字数据

- 数据

  + 模拟数据

    连续状态的信息，采用连续值

  + 数字数据

    离散状态的信息，采用离散值

### 模拟信号与数字信号

- 信号

  + 模拟信号

    在一段时间内有无穷多个强度等级，当波形振幅由值A变为值B时，沿着它变化的过程有无穷多个值

  + 数字信号

    只能有有限个已定义的数值，通常是简单的0和1

  + 模拟信号与数字信号的比较

    ![模拟信号与数字信号的比较](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220190702.png)

### 周期信号与非周期信号

- 周期信号

  周期模拟信号

  周期模拟信号需要更少的带宽

- 非周期信号

  非周期数字信号

  非周期数字信号可以表示数据的变化

## 周期模拟信号

### 简单类型

- 简介

  不能分解为更简单的信号

- 正弦波

  三个参数表示

  + 峰值振幅

  + 周期与频率

    **周期**(Period) 是信号完成一个循环所需要的时间，以秒为单位。

    **频率**( frenquency)是 指1秒内的周期数。

    注意周期与频率是按两种方式定义的同一特性。$f = 1 / T$

    > 关于频率的解读
    >
    > 频率是信号与时间的关系，而一个波形的频率是一秒钟内完成的周期的次数，但从另一种角度可把频率看做变化速率的计量单位。电磁信号是振荡的波形，也就是说，它们会在平均能量级上下持续而且可预测地波动。40Hz的信号是80Hz信号频率的一半，完成一个循环的时间是80Hz信号的两倍，所以每一个循环也需要两倍长的时间从最低电压变化到最高电压。所以，尽管将频率描述为每秒内的循环次数，通常也用于计量信号对于时间的变化速率。
    
    如果信号始终不变化，则其频率是0；如果信号瞬间发生变化，则其频率值是无穷大。

  + 相位
  
    波形相对于时间零的位置
  
    相移多少度，正弦波向左移动相应的度数
  
    ![相位不同的三条正弦波](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220191835.png)

- 波长

  信号通过传输介质传播的另一个特性，将简单正弦波的周期或频率与介质的传播速度结合在一起

  ![波长和周期](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220192941.png)

  波长是简单信号在一个周期能传播的距离
  $$
  波长 = 传播速度 * 周期 = 传播速度 / 频率\\
  \lambda  = c / f
  $$
  
- 时域和频域

  + 时域

    时域图 - 显示了信号振幅随时间的变化情况（振幅的时间图）

  + 频域

    频域图 - 表示振幅与频率的关系

  ![正弦波的时域图和频域图](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220194401.png)

### 复合类型

- 简介

  由多个简单正弦波信号组成
  
  使用复合信号来进行数据通信
  
  > 按照傅里叶分析，任何复合信号是由具有不同频率、相位和振幅的简単正弦波的组合而成。
  
  如果复合信号是周期性的，分解得到的是一系列具有离散频率的信号。
  
  如果复合信号是非周期性的，分解得到的是具有连续频率的正弦波组合。

- 分解

  ![复合周期信号](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220201101.png)

  ![复合周期信号在时域和频域中的分解](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220201119.png)

  + 基础频率（第一谐波）

    频率为 $f$ 的正弦波的频率和复合信号的频率一样，称为基础频率，或者第一谐波

  + 第n谐波

    频率为 $9f$ 的正弦波的频率是基础频率的9倍，称为第九谐波

  + 注

    分解后的信号的频率是离散的

    周期复合信号的频域总是有离散尖峰组成

- 带宽

  复合信号包含的频率范围称为带宽，复合信号的带宽是信号最高频率与最低频率的差值

  ![周期复合信号和非周期复合信号的带宽](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220203431.png)

## 数字信号

- 简介

  数据还可以使用数字信号表示

  ![一个信号有两个电平，而另一个信号有四个电平](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220203920.png)

  一般，如果信号有 L 个电平，则每个电平需要 $log_2L$ 个位

- 比特率

  来描述数字信号，是指1秒中发送的位数，单位为 每秒位bps

- 位长

  一个位在传输介质上的距离

  位长 = 传播速度 * 位持续时间

- 数字信号是一种复合模拟信号

  在时域中，数字信号由连接的垂直和水平线段组成。时域中的垂直线表示为无穷大的频率（随时间突变），而时域中的水平线表示为0的频率（不随时间变化）。从频率0变为频率无穷大（以及反之）暗示两者间的所有频率都是域的一部分。

  + 分解数字信号

    若数字信号是周期性的（在数据通信中较少见），分解后的信号可以表示为无穷大带宽和离散频率的频域。
     若数字信号是非周期性的，分解后的信号仍然是无穷大帯宽，但频率是连续的。

    ![周期数字信号和非周期数字信号的时域和频域](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220205325.png)

## 数字信号的传输

前面的讨论断言数字信号（周期性或非周期性）是由零到无穷大范围内的频率组合成的复合模拟信号。

使用两种方法传输数字信号：

- 基带传输

  通过通道发送数字信号，该信号不转换成模拟信号

  **低通通道** 带宽从0开始的通道

  + 宽带宽的低通通道

    只有我们有无穷大或非常大带宽的低通通道，保持数字信号形状的数字信号基带传输才是可能的

  + 有限带宽的低通通道

    在有限带宽的低通通道中，把数字信号近似成模拟信号。

    近似程度：

    * 大致近似

      ![大致近似](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220213231.png)

    * 更好近似
    
      ![更好近似](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220213221.png)

- 宽带传输

  + 使用调制
  
    宽带传输或调制就是把数字信号转换成模拟信号传输。调制允许我们使用带通通道( bandpass channel)，即带宽不从0开始的通道。
  
  + 数字信号在带通通道传输的调制过程
  
    ![数字信号在带通通道传输的调制过程](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220224857.png)

    如果可用通道是带通通道，我们不能直接发送数字信号到通道；我们需要在传输前把数字信号转换成模拟信号
    
    使用单频率模拟信号（称为载波）
  
  + 与低通通道
  
    低通通道可以看做是较低频率从0开始的带通通道
  
    通过电话用户线传输计算机数据 - 设计用有限带宽(0-4kHz间的频率)承载语音（模拟信号），这个通道一般被看做带通通道（带宽太小，如果当作低通通道用于基带传输，那么最大的比特率8kbps就太小）

## 传输减损

三种类型的减损：衰减、失真和噪声

### 衰减 attenuation

- 简介

  能量损失

  ![衰减示例](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220230510.png)

- 分贝

  用于计算两种信号之间或者同一信号在两个位置之间的相对强度

  信号衰减，分贝为负，信号被放大，分布为正
  $$
  dB = 10 log_{10}\frac{P_2}{P_1} \quad P-功率\\
  dB = 20 log_{10}\frac{V_2}{V_1} \quad V-电压
  $$

### 失真 distortion

- 简介

  信号改变了形态或形状

  接收方的信号成分与发送方的信号成分存在相位差异——不同频率成分组成的复合信号中，在通过介质时有自己的传播速度，到达目的结点时有各自的延迟，可能会产生相位差

- 失真示例

  ![失真示例](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220231918.png)

### 噪声 noise

- 简介

  ![噪声示例](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220232113.png)

- 信噪比 SNR
  $$
  SNR = \frac{平均信号功率}{平均噪声功率}
  $$
  ![信噪比](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220232309.png)

  较高的SNR：信号较少地被噪声破坏

  较低的SNR：信号被噪声更多地破坏

  与分贝：$SNR_{dB} = 10 log_{10}SNR$

## 数据速率限制

### 数据速率

数据通信中一个非常重要的问题是：在一个通道中能够以多快的速率发送数据，即每秒钟的比特数。
数据速率取决于三种因素

1. 有效带宽
2. 使用的信号电平数
3. 通道的质量（噪声电平）。

### 奈奎斯特比特率

无噪声通道

理论上的最大比特率：
$$
比特率 = 2 * 带宽 * log_2L\\
带宽：通道的带宽\\
L：表示数据的信号电平的数量\\
比特率：每秒中的位数\\
增加信号电平数会减弱系统的可靠性
（限制了比特率）
$$

![奈奎斯特定理使用示例](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220233442.png)

### 香农容量定理

噪声通道

噪声通道理论上的最高数据速率：
$$
通道容量 = 带宽 * log_2(1+SNR)\\
= 带宽 * log_2(1+10^{SNR_{dB}/10})\\
带宽：通道的带宽\\
SNR：信噪比\\
通道容量：通道的传输容量，每秒的比特数
$$
![香农容量定理使用示例](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220233326.png)

### 使用的限制条件

![两种定理使用的限制条件](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201220234916.png)

## 性能

### 带宽

- 以赫兹衡量的带宽

  是复合信号包含的频率范围或者通道能通过的频率范围

- 以每秒比特数衡量的带宽

  通道、链路或者网络每秒能发送的位数

- 两者关系

  有明显的关系，这取决于是否有基带传输或者调制传输

### 吞吐量

衡量通过网络发送数据的快慢

带宽是链路的潜在衡量值，吞吐量是发送速度快慢的实际衡量值

### 延迟

定义了第一个位从源开始发出到整个报文完全到达目标所经历的时间。

由四部分组成：传播时间(propagation time)、传输时间(transmission time)、排队时间(queuing time)、处理延迟(processing delay)

$延迟 = 传播时间 + 传输时间 + 排队时间 + 处理延迟$

- 传播时间

  衡量一个位从源传输到目标所需的时间

  $传播时间 = 距离 / 传播速度$

- 传输时间

  发送报文多个位，第一个位离开发送方到最后一个位到达接收方之间有个时间

  $传输时间 = 报文长度 / 带宽$

- 排队时间

  每个中间或端设备在处理报文前保持报文所需的时间

  根据网络负载改变

- 处理延迟

- 抖动

  之后详细介绍

### 带宽与延迟的乘积

数据通信中十分重要的是带宽与延迟的乘积

带宽和延迟的乘积是能充满链路的位的个数

![充满链路情形1](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201221101934.png)

![充满链路情形2](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201221101952.png)

2\*带宽\*延迟 任何时刻转换的位数

![带宽延迟乘积](https://gitee.com/twilight_h_1184651848/pic-go-img/raw/master/computerNetworks/dataAndSignals/20201221101747.png)